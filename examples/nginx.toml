[default]
ssl_cert_domain = "example.com"

[[http_d]]
server_name = "www.example.com"
listen = 10080
listen_ssl = 10443
proxy_pass = "http://127.0.0.1:8000"

client_max_body_size = "100m"

[[http_d]]
server_name = "www.port.error"
proxy_pass = "http://127.0.0.1:8000"

[[http_d]]
server_name = "www.http.only.example.com"
listen = 10080
proxy_pass = "http://127.0.0.1:8000"

[[http_d]]
server_name = "www.https.only.example.com"
listen = 10443
proxy_pass = "http://127.0.0.1:8000"

[[http_d]]
server_name = "www.special.port.example.com"
listen_ssl = 55555
proxy_pass = "http://127.0.0.1:8000"

[[http_d]]
server_name = "www.mapping.root.com"
listen_ssl = 10443
root_path = "/var/www"

[[http_d]]
server_name = "www.custom.root.location.example.com"
listen_ssl = 10443
proxy_pass = "http://127.0.0.1:8000"

location."/" = """
proxy_pass $proxy_pass;
"""

[[http_d]]
server_name = "www.more.location.example.com"
listen_ssl = 10443
proxy_pass = "http://127.0.0.1:8000"

location."/" = """
proxy_pass $proxy_pass;
"""
location."/api/verify" = """
proxy_pass $proxy_pass;
"""

[[http_upstream]]
name = "upstream_websocket"
content = """
    least_conn;
    server 127.0.0.1:8081;
    server 127.0.0.1:8082;
"""

[[http_d]]
server_name = "custom.upstream.example.com"
listen = 10080
proxy_pass = "http://127.0.0.1:8000"

location."/ws" = """
    proxy_pass upstream_websocket;
"""

support_websocket = true

[[http_d]]
server_name = "www.disable.http2.example.com"
listen_ssl = 10443
listen_http2 = false
root_path = "/var/www"

[[http_d]]
server_name = "hsts.example.com"
listen = 10080
listen_ssl = 10443
proxy_pass = "http://127.0.0.1:8000"
hsts = true

[[stream_d]]
comment = "ssh"
listen = 10022
proxy_pass = "192.168.1.1:22"

[[stream_d]]
comment = "git"
listen = 12222
upstream_name = "ssh_upstream_test"
upstream_server = "test.lan:22"
proxy_pass = "ssh_upstream_test"
